var C=Object.defineProperty;var P=(s,e,t)=>e in s?C(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var a=(s,e,t)=>P(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function S(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var f={},v;function x(){if(v)return f;v=1,Object.defineProperty(f,"__esModule",{value:!0});var s=function(){function e(t,i){Object.defineProperty(this,"parametersWrapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputsInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onShowEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isVisible",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"position",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onUpdateCanvas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.inputsInfo=t,this.isVisible=(i==null?void 0:i.defaultVisible)||!0,this.onShowEvent=(i==null?void 0:i.onShowEvent)||"dblclick",this.position=i==null?void 0:i.position,this.onUpdateCanvas=i==null?void 0:i.onUpdateCanvas,this.createParameters(),this.createInputs(this.getParametersWrapper()),this.handleClick()}return Object.defineProperty(e.prototype,"createParameters",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=document.createElement("div");document.body.appendChild(t),this.parametersWrapper=t,this.setStyleForParametersWrapperNode()}}),Object.defineProperty(e.prototype,"createInputs",{enumerable:!1,configurable:!0,writable:!0,value:function(t){for(var i=0;i<this.inputsInfo.length;i++){var r=this.inputsInfo[i],o=document.createElement("label");o.textContent=r.placeholder||"Placeholder is not defined";var n=document.createElement("input"),l=Math.random().toString();o.htmlFor=l,n.id=l,this.setStyleForInputNode(n);for(var h=0;h<Object.entries(r).length;h++){var d=Object.entries(r)[h],m=d[0],u=d[1];u&&n.setAttribute(m,u.toString())}this.handleInputChange(n),t.appendChild(o),t.appendChild(n)}}}),Object.defineProperty(e.prototype,"getParametersWrapper",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.parametersWrapper)throw new Error("The wrapper for the parameters was not created.");return this.parametersWrapper}}),Object.defineProperty(e.prototype,"handleClick",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;document.addEventListener(this.onShowEvent,function(){var i=t.getParametersWrapper();t.isVisible?i.style.display="none":i.style.display="grid",t.isVisible=!t.isVisible})}}),Object.defineProperty(e.prototype,"setStyleForInputNode",{enumerable:!1,configurable:!0,writable:!0,value:function(t){t.style.display="block",t.style.margin="5px",t.style.outline="0",t.style.border="none"}}),Object.defineProperty(e.prototype,"setStyleForParametersWrapperNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t,i,r=this.getParametersWrapper();r.style.position="absolute",r.style.top=((t=this.position)===null||t===void 0?void 0:t.top)||"0px",r.style.left=((i=this.position)===null||i===void 0?void 0:i.left)||"0px",r.style.backgroundColor="rgba(0, 0, 0, 0.5)",r.style.fontFamily="sans-serif",r.style.padding="5px",r.style.display=this.isVisible?"grid":"none",r.style.gridTemplateColumns="repeat(2, 1fr)",r.style.userSelect="none",r.style.gap="5px",r.style.alignItems="center",r.style.color="#ffffff"}}),Object.defineProperty(e.prototype,"handleInputChange",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var i=this;t.addEventListener("input",function(r){var o,n=r.target;if(!n)throw new Error("Target was not founed");var l=i.inputsInfo.find(function(h){return h.name===n.name});if(!l)throw new Error("Control  was not founed");l.onChange(n.value),(o=i.onUpdateCanvas)===null||o===void 0||o.call(i)})}}),e}();return f.default=s,f}var O=x();const E=S(O);class F{constructor({circlesNum:e,circleSpeed:t,intersectionFillColor:i}){a(this,"cnv");a(this,"ctx");a(this,"w");a(this,"h");a(this,"circles");a(this,"circleStrokeColor");a(this,"intersectionFillColor");a(this,"intersectionStrokeColor");a(this,"intersectionDotRadius");a(this,"circleSpeed");a(this,"circlesNum");this.circleStrokeColor="white",this.intersectionFillColor=i,this.intersectionStrokeColor="#ffffff",this.intersectionDotRadius=1,this.circleSpeed=t,this.circlesNum=e,this.createCanvas(),this.setCanvasSize(),this.createCircles(),this.updateAnimation(),window.addEventListener("resize",()=>{this.setCanvasSize(),this.createCircles()})}createCanvas(){this.cnv=document.createElement("canvas"),this.cnv.style.background=this.getRandomColor(),this.ctx=this.cnv.getContext("2d"),document.body.appendChild(this.cnv)}getRandomColor(e=1){return`hsla(${Math.random()*360}, 70%, 50%, ${e})`}setCanvasSize(){if(!this.cnv)throw new Error("no cnv");this.w=this.cnv.width=innerWidth,this.h=this.cnv.height=innerHeight}createCircles(){if(!this.w||!this.h)throw new Error("no h or w");const t=Math.min(this.w,this.h)/3,i=t/2;this.intersectionDotRadius=i/20,this.circles=[];for(let r=0;r<this.circlesNum;r++){const o=Math.random()*Math.PI*2,n={color:this.getRandomColor(.5),radius:this.getRandomFromRange(i,t),xPos:this.getRandomFromRange(t,this.w-t),yPos:this.getRandomFromRange(t,this.h-t),velocityX:Math.cos(o)*this.circleSpeed,velocityY:Math.sin(o)*this.circleSpeed};this.circles.push(n)}}getRandomFromRange(e,t){return Math.random()*t-e+e}updateCircles(){if(!this.circles)throw new Error("no circles");if(!this.ctx)throw new Error("no ctx");this.ctx.globalCompositeOperation="lighten";for(let e=0;e<this.circles.length;e++){const t=this.circles[e];this.checkBounce(t),t.xPos+=t.velocityX,t.yPos+=t.velocityY,this.drawCircle(t.xPos,t.yPos,t.radius,t.color,this.circleStrokeColor)}this.ctx.globalCompositeOperation="source-over"}drawCircle(e,t,i,r,o){if(!this.ctx)throw new Error("no ctx");this.ctx.fillStyle=r,this.ctx.strokeStyle=o,this.ctx.beginPath(),this.ctx.arc(e,t,i,0,2*Math.PI),this.ctx.fill(),this.ctx.stroke()}getIntersection(){if(!this.circles)throw new Error("no circles");for(let e=0;e<this.circles.length;++e){const t=this.circles[e];for(let i=e+1;i<this.circles.length;++i){const r=this.circles[i],o=r.xPos-t.xPos,n=r.yPos-t.yPos,l=Math.hypot(o,n);l<=t.radius+r.radius&&this.drawIntersection(t.radius,r.radius,l,o,n,t)}}}checkBounce(e){if(!this.w||!this.h)throw new Error("no h or w");(e.xPos+e.radius>this.w&&e.velocityX>0||e.xPos<e.radius&&e.velocityX<0)&&(e.velocityX=-e.velocityX),(e.yPos+e.radius>this.h&&e.velocityY>0||e.yPos<e.radius&&e.velocityY<0)&&(e.velocityY=-e.velocityY)}drawIntersection(e,t,i,r,o,n){const l=e**2,h=t**2,d=i**2,m=(l-h+d)/(e*i*2),u=Math.acos(m),p=Math.atan2(o,r),y=n.xPos+Math.cos(p-u)*e,b=n.yPos+Math.sin(p-u)*e,g=n.xPos+Math.cos(p+u)*e,w=n.yPos+Math.sin(p+u)*e;this.drawCircle(y,b,this.intersectionDotRadius,this.intersectionFillColor,this.intersectionStrokeColor),this.drawCircle(g,w,this.intersectionDotRadius,this.intersectionFillColor,this.intersectionStrokeColor)}clearCanvas(){if(!this.ctx)throw new Error("no ctx");if(!this.w||!this.h)throw new Error("no h or w");this.ctx.clearRect(0,0,this.w,this.h)}updateAnimation(){return this.clearCanvas(),this.updateCircles(),this.getIntersection(),requestAnimationFrame(()=>this.updateAnimation())}setCirclesNum(e){this.circlesNum=e}setCircleSpeed(e){this.circleSpeed=e}setIntersectionFillColor(e){this.intersectionFillColor=e}}const R={circlesNum:5,circleSpeed:.5,intersectionFillColor:"#ffffff"},c=new F(R);new E([{type:"number",placeholder:"Количество шаров",name:"circlesNum",value:c.circlesNum.toString(),onChange:s=>{c.setCirclesNum(s)}},{type:"number",placeholder:"Скорость перемещения",name:"circleSpeed",value:c.circleSpeed.toString(),onChange:s=>{c.setCircleSpeed(s)}},{type:"color",placeholder:"Цвет точек перемещения",name:"intersectionFillColor",value:c.intersectionFillColor,onChange:s=>{c.setIntersectionFillColor(s)}}],{onUpdateCanvas:()=>{c.createCircles();const s=c.updateAnimation();cancelAnimationFrame(s)}});
